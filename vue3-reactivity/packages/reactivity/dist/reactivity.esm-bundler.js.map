{"version":3,"file":"reactivity.esm-bundler.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["/*\r\n * @Author: 李思豪\r\n * @Date: 2022-06-23 11:05:10\r\n * @LastEditTime: 2022-07-19 14:53:47\r\n * @Description: file content\r\n * @LastEditors: 李思豪\r\n */\r\n\r\nexport const _isObject = (value) => typeof value == 'object' && value !== null;\r\n\r\nexport const _extend = Object.assign\r\n\r\nexport const _isArray = Array.isArray\r\n\r\nexport const _isIntegerKey = (key) => parseInt(key) + '' === key\r\n\r\nlet hasOwnpRroperty = Object.prototype.hasOwnProperty;\r\nexport const _hasOwn = (target, key) => hasOwnpRroperty.call(target, key);\r\n\r\nexport const _hasChanged =(oldValue,value) => oldValue !== value","/*\r\n * @Author: 李思豪\r\n * @Date: 2022-07-19 15:05:49\r\n * @LastEditTime: 2022-07-22 16:44:00\r\n * @Description: file content\r\n * @LastEditors: 李思豪\r\n */\r\n\r\nimport { _isArray, _isIntegerKey } from \"@vue/shared\";\r\n\r\nexport function effect(fn, options: any = {}){\r\n  // 将 effect 变为响应式, 当数据变化时重新执行\r\n  const effect = createReactiveEffect(fn,options)\r\n  if (!options.lazy) { // 默认的effect会先执行\r\n    effect(); // 响应式的effect默认会先执行一次\r\n  }\r\n  return effect;\r\n}\r\n\r\nlet uid = 0;\r\nlet activeEffect; // 存储当前的 effect\r\nconst effectStack = []\r\n\r\n// 当用户取值的时候需要将 activeEffect 和属性做关联\r\n// 当用户更改的时候需要通过属性找到 effect 重新执行\r\nfunction createReactiveEffect(fn, options){\r\n  const effect = function reactiveEffect(){\r\n    // if(!effectStack.includes(effect)){\r\n      try{\r\n        effectStack.push(effect);\r\n        activeEffect = effect\r\n        return fn()\r\n      }finally{\r\n        effectStack.pop();\r\n        activeEffect = effectStack[effectStack.length - 1];\r\n      }\r\n    // }\r\n  }\r\n  effect.id = uid++; // 制作一个effect标识 用于区分effect\r\n  effect._isEffect = true; // 用于标识这个是响应式effect\r\n  effect.deps = []; // effect 用来收集依赖了哪些属性\r\n  // effect.raw = fn; // 保留effect对应的原函数\r\n  // effect.options = options; // 在effect上保存用户的属性\r\n  return effect;\r\n}\r\n\r\n// 收集属性对应的 effect\r\nconst targetMap = new WeakMap();\r\nexport function track(target, type, key){ // 可以拿到当前的effect\r\n  //  activeEffect; // 当前正在运行的effect\r\n  if(activeEffect === undefined){ // 此属性不用收集依赖，因为没在effect中使用\r\n    return \r\n  }\r\n  let depsMap = targetMap.get(target)\r\n  if(!depsMap){\r\n    targetMap.set(target,(depsMap = new Map()))\r\n  }\r\n  let dep = depsMap.get(key);\r\n  if (!dep) {\r\n    depsMap.set(key, (dep = new Set()))\r\n  }\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect);\r\n  }\r\n}\r\n\r\n// 找到属性对应的 effect 让其执行 (数组、对象)\r\nexport function trigger(target, type, key?, newValue?, oldValue?){\r\n  // 如果这个属性没有 收集过 effect, 那不需要做任何操作\r\n  const depsMap = targetMap.get(target)\r\n  if(!depsMap) return\r\n\r\n  const effects = new Set() //这里对 effect 去重\r\n  const add = (effectsToAdd) => {\r\n    if (effectsToAdd) {\r\n      effectsToAdd.forEach(effect => effects.add(effect));\r\n    }\r\n  }\r\n  // 我要将所有的 要执行的effect 全部存到一个新的集合中，最终一起执行\r\n\r\n  // 1.如果更改的数组长度 小于依赖收集的长度 要触发重新渲染\r\n  // 2.如果调用了 push 方法 或者其他新增数组方法 (必须能改变长度的方法) 也要触发更新\r\n  if(key === 'length' && _isArray(target)){ // 如果是数组, 你改了 length\r\n    // 如果对应的长度 有依赖收集需要更新\r\n    depsMap.forEach((dep, key) => {\r\n      if (key === 'length' || key > newValue) {\r\n          add(dep) // 更改的数组长度 比收集到的属性的值小\r\n      }\r\n    })\r\n  }else{\r\n    // 可能是对象\r\n    if(key !== undefined){\r\n      add(depsMap.get(key))\r\n    }\r\n    switch(type){\r\n      case 'add':\r\n        if(_isArray(target) && _isIntegerKey(key)){\r\n          add(depsMap.get('length')) // 新增属性 需要触发 length 的依赖收集\r\n        }\r\n    }\r\n  }\r\n  effects.forEach((effect:any) => effect())\r\n}","/*\r\n* @Author: 李思豪\r\n* @Date: 2022-07-13 16:07:17\r\n * @LastEditTime: 2022-07-22 16:32:09\r\n* @Description: file content\r\n * @LastEditors: 李思豪\r\n*/\r\nimport { _extend, _hasChanged, _hasOwn, _isArray, _isIntegerKey, _isObject } from \"@vue/shared\"\r\nimport { track, trigger } from \"./effect\";\r\nimport { reactive, readonly } from \"./reactive\";\r\n\r\n/**\r\n * \r\n * @param isReadonly \r\n * @param shallow \r\n * @returns \r\n */\r\nfunction createGetter(isReadonly = false, shallow = false){\r\n  /**\r\n   * @param target 是原来的对象\r\n   * @param key 去取什么属性\r\n   * @param receiver 代理对象\r\n   */\r\n  return function get(target, key, receiver){\r\n    // Reflect 就是后续慢慢替换掉 Object 对象, 一般是会用 proxy 会配合 Reflect\r\n    // target[key] === Reflect.get(target, key, receiver)\r\n    const res = Reflect.get(target, key, receiver)\r\n    if(shallow) return res;\r\n    if(!isReadonly){\r\n      // console.log('收集当前属性, 如果属性变化了, 稍后可能要更新视图')\r\n      track(target, 'get', key)\r\n    }\r\n    if(_isObject(res)){ // 懒递归, 当我们取值的时候才去做 递归代理, 如果不取默认值代理一层\r\n      return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n    return res\r\n  }\r\n  // vue3 针对的是对象来进行劫持, 不用改写原来的对象, 如果是嵌套, 当取值的时候才会代理\r\n  // vue2 针对的是属性劫持, 改写了原来对象, 一上来就递归的。\r\n  // vue3 可以对不存在的属性进行获取, 也会走 get 方法, proxy 支持数组。\r\n} \r\n\r\n/**\r\n * 设置属性, 可能是新增属性, 还有可能是修改属性值\r\n * @param shallow \r\n * @returns \r\n */\r\nfunction createSetter(shallow = false){\r\n  // 针对数组而言, 如果调用 push 方法, 就会产生 2 次触发\r\n  // 1. 给数组新增了一项，同时也更改了长度\r\n  // 2. 因为更改了长度再次触发 set (第二次触发是无意义的)\r\n  return function set(target, key, value, receiver){\r\n    const oldValue = target[key]\r\n    // 判断数组是新增还是修改\r\n    let hadKey = _isArray(target) && _isIntegerKey(key) ? Number(key) < target.length : _hasOwn(target, key)\r\n    // 先判断有没有，再去设置值\r\n    const res = Reflect.set(target, key, value, receiver)\r\n    if(!hadKey){\r\n      console.log('新增')\r\n      trigger(target, 'add', key,value);\r\n    }else if(_hasChanged(oldValue, value)){\r\n      console.log('修改')\r\n      trigger(target, 'set', key, value, oldValue)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nconst get = createGetter()\r\nconst shallowGet = createGetter(false, true)\r\nconst readonlyGet = createGetter(true)\r\nconst shallowReadonlyGet = createGetter(true, true)\r\n\r\nconst set = createSetter()\r\nconst shallowSet = createSetter(true)\r\n\r\nexport const mutableHandler = {\r\n  get,\r\n  set,\r\n}\r\nexport const shallowReactiveHandlers = {\r\n  get:shallowGet,\r\n  set:shallowSet\r\n}\r\n\r\nlet readonlySet = {\r\n  set(target, key){\r\n    console.warn(`cannot set ${JSON.stringify(target)} on key ${key} falied`)\r\n  }\r\n}\r\n\r\nexport const readonlyHandlers = _extend({\r\n    get:readonlyGet\r\n},readonlySet)\r\n\r\nexport const shallowReadonlyHanlders = _extend({\r\n  get:shallowReadonlyGet\r\n},readonlySet)\r\n\r\n","/*\r\n * @Author: 李思豪\r\n * @Date: 2022-06-24 14:58:48\r\n * @LastEditTime: 2022-07-19 14:28:56\r\n * @Description: file content\r\n * @LastEditors: 李思豪\r\n */\r\n\r\nimport { _isObject } from '@vue/shared';\r\nimport { mutableHandler, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHanlders} from './baseHandlers'\r\n\r\n/**\r\n * @param target\r\n */\r\nexport function reactive(target) {\r\n  return createReactiveObject(target, false, mutableHandler);\r\n}\r\nexport function shallowReactive(target) {\r\n return createReactiveObject(target, false, shallowReactiveHandlers);\r\n}\r\nexport function readonly(target) {\r\n return createReactiveObject(target, true, readonlyHandlers);\r\n}\r\nexport function shallowReadonly(target) {\r\n return createReactiveObject(target, true, shallowReadonlyHanlders);\r\n}\r\n\r\n\r\n/**\r\n * @param target 创建代理的目标\r\n * @param isReadonly 当前是不是仅读的\r\n * @param baseHandler 针对不同的方式创建不同的代理对象\r\n */\r\nconst reactiveMap = new WeakMap()\r\nconst readonlyMap = new WeakMap()\r\nfunction createReactiveObject(target, isReadonly, baseHandler) {\r\n  if (!_isObject(target)) target;\r\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\r\n  const exisProxy = proxyMap.get(target)\r\n  if(exisProxy) exisProxy\r\n  const proxy = new Proxy(target, baseHandler);\r\n  proxyMap.set(target, proxy)\r\n  return proxy;\r\n}\r\n\r\n","import { _hasChanged, _isObject } from \"@vue/shared\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { reactive } from \"./reactive\";\r\n\r\n/*\r\n * @Author: 李思豪\r\n * @Date: 2022-07-22 16:53:51\r\n * @LastEditTime: 2022-07-22 17:20:16\r\n * @Description: file content\r\n * @LastEditors: 李思豪\r\n */\r\nexport function ref (value){ // 可以传入对象\r\n  // 把普通值变成一个引用类型，让一个普通值也具备响应式的能力\r\n  return createRef(value)\r\n}\r\n\r\nexport function shallowRef(value){\r\n  return createRef(value, true)\r\n}\r\n\r\nconst conver = (v) => _isObject(v) ? reactive(v) : v\r\n\r\n// ts 中实现类  -- 私有属性必须先声明才能使用\r\nclass RefIml {\r\n  public _value;\r\n  public _v_isRef = true; // 表示他是一个 ref\r\n  constructor(public rawValue, public shallow){\r\n    // public rawVal ===   (this.rawValue = rawValue)\r\n    this._value = shallow ? rawValue : conver(rawValue)\r\n  }\r\n  get value(){\r\n    // 收集依赖\r\n    track(this, 'get', 'value')\r\n    return this._value\r\n  }\r\n  set value(newValue){\r\n    if(_hasChanged(newValue, this.rawValue)){\r\n      // 触发依赖\r\n      this.rawValue = newValue;\r\n      this._value = this.shallow  ? newValue :conver(newValue)\r\n      trigger(this, 'set', 'value', newValue, this.rawValue)\r\n    }\r\n  }\r\n}\r\n\r\nfunction createRef(value, shallow = false){\r\n  return new RefIml(value, shallow) // 借助类的属性访问器\r\n}"],"names":[],"mappings":"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"}